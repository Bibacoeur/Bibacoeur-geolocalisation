<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 50%; margin: 20; padding: 20 }
      
    </style>
    <link href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCAO4Y9lTYLunl_EwzQPi7bRbzY_rJToXw&sensor=true">
    </script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/map.css"/>
    <script src="phonegap.js"></script> 

    <script type="text/javascript">
	
	
	google.maps.event.addDomListener(window, 'load', initialize);
	
	  function initialize() {
		
		var  joueur_position = {
		currentlat : 45.78272115660313,
		currentlong : 4.872586727142334
	}
	
	var myStyles =[
    {
        featureType: "poi",
        elementType: "labels",
        stylers: [
              { visibility: "off" }
        ]
    }
];

 var GIcoords, BMCCoords;
	
  navigator.geolocation.getCurrentPosition(onSuccess, onError);
  
  //géolocalisation : off
    function onError(error) {
alert(' activer geolocalisation');
var mapOptions = {
    zoom: 18,
    center: new google.maps.LatLng(joueur_position.currentlat, joueur_position.currentlong),
	styles : myStyles,
	streetViewControl: false
  };
  
  var map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  // Define the LatLng coordinates for the polygon's path.
  var GICoords = [
     new google.maps.LatLng(45.78272115660313, 4.872586727142334),
		new google.maps.LatLng(45.78311770592766, 4.874560832977295),
		new google.maps.LatLng(45.78267626404904, 4.874989986419678),
		new google.maps.LatLng(45.78234705088116, 4.872919321060181)
  ];
  
  var BMCCoords = [
     	new google.maps.LatLng(45.78226100621001, 4.876572489738464),
		new google.maps.LatLng(45.78238820263345, 4.877200126647949),
		new google.maps.LatLng(45.78266878195318, 4.877082109451294),
		new google.maps.LatLng(45.78255655039474, 4.876207709312439)
  ];

  // Construct the polygon.
  GI = new google.maps.Polygon({
    paths: GICoords,
    strokeColor: '#00FFFF',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#00FFFF',
    fillOpacity: 0.35
  });
  
   BMC = new google.maps.Polygon({
    paths: BMCCoords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.7
  });

  GI.setMap(map);
  BMC.setMap(map);
  
  google.maps.event.addListener(GI,'click', function() {
	  
	   window.location.href="GI.html";
  })
  }

  
  //géolocalisation : on
  function onSuccess(position) { 
 	joueur_position.currentlat = position.coords.latitude;
	  joueur_position.currentlong = position.coords.longitude;

  var mapOptions = {
    zoom: 18,
    center: new google.maps.LatLng(joueur_position.currentlat, joueur_position.currentlong),
	styles : myStyles,
	streetViewControl: false
  };
  

  var map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  // Define the LatLng coordinates for the polygon's path.
  var GICoords = [
     new google.maps.LatLng(45.78272115660313, 4.872586727142334),
		new google.maps.LatLng(45.78311770592766, 4.874560832977295),
		new google.maps.LatLng(45.78267626404904, 4.874989986419678),
		new google.maps.LatLng(45.78234705088116, 4.872919321060181)
  ];
  
  var BMCCoords = [
     	new google.maps.LatLng(45.78226100621001, 4.876572489738464),
		new google.maps.LatLng(45.78238820263345, 4.877200126647949),
		new google.maps.LatLng(45.78266878195318, 4.877082109451294),
		new google.maps.LatLng(45.78255655039474, 4.876207709312439)
  ];

  // Construct the polygon.
  GI = new google.maps.Polygon({
    paths: GICoords,
    strokeColor: '#00FFFF',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#00FFFF',
    fillOpacity: 0.35
  });
  
   BMC = new google.maps.Polygon({
    paths: BMCCoords,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.7
  });

  GI.setMap(map);
  BMC.setMap(map);
  
  google.maps.event.addListener(GI,'click', function() {
	  
	   window.location.href="GI.html";
  })
}
	  }

/*$(function() {
         if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile)/)) {
  document.addEventListener("deviceready", initialize, false);

} else {
  google.maps.event.addDomListener(window, 'load', initialize);
 //this is the browser
}
});*/   //not working !!

      </script>
</head>
  <body>
    <div data-role="page" id="map">
      <div data-role="header">
      <a href="#" data-rel="back" data-role="button" id="mentions-back-button" class="">Back</a>
        <h1>En-tête</h1>
      </div>
    <div data-role="content" id="map-canvas"></div>
   
    </div>
  
 
</body>
</html>